<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vCard QR Code</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="form-container">
    <h1>vCard QR Code</h1>
    <form id="qr-form">
      <div class="form-group">
        <label>Your Name:</label>
        <input type="text" id="firstname" placeholder="First Name" required />
        <input type="text" id="lastname" placeholder="Last Name" required />
      </div>

      <div class="form-group">
        <label>Contact:</label>
        <input type="text" id="mobileNumber" placeholder="Phone" required />
        <input type="text" id="fax" placeholder="Fax" />
      </div>

      <div class="form-group">
        <label>Email:</label>
        <input type="email" id="email" placeholder="your@email.com" />
      </div>

      <div class="form-group">
        <label>Company:</label>
        <input type="text" id="company" placeholder="Company" />
        <input type="text" id="job" placeholder="Your Job" />
      </div>

      <div class="form-group">
        <label>Street:</label>
        <input type="text" id="street" placeholder="Street" />
      </div>

      <div class="form-group">
        <label>City:</label>
        <input type="text" id="city" placeholder="City" />
        <input type="text" id="zip" placeholder="ZIP" />
      </div>

      <div class="form-group">
        <label>State:</label>
        <input type="text" id="state" placeholder="State" />
      </div>

      <div class="form-group">
        <label>Country:</label>
        <input type="text" id="country" placeholder="Country" />
      </div>

      <button type="submit">Generate QR Code</button>
    </form>
    <div id="qr-result" style="text-align: center;"></div>
  </div>
  <script>
    console.log(document.getElementById('qr-form'))
    document.getElementById('qr-form').addEventListener('submit', async function (e) {
      e.preventDefault();
      const firstname = document.getElementById('firstname').value;
      const lastname = document.getElementById('lastname').value;
      const mobileNumber = document.getElementById('mobileNumber').value;
      const address = document.getElementById('street').value;


      if (!firstname || !mobileNumber) {
        alert('Please enter both first, last name and mobilenumber');
        return;
      }

      try {
        const response = await fetch('/generate', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ firstname, lastname, mobileNumber, address }),
        });

        const result = await response.json();

        if (response.ok) {
          document.getElementById('qr-result').innerHTML = `<img src="${result.qrCode}" alt="QR Code" />`;
        } else {
          alert(result.error);
        }
      } catch (error) {
        console.error('Error generating QR code:', error);
      }
    });
  </script>
</body>
</html>
